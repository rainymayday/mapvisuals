<html>
  <head>
    <script src="node_modules\d3\d3.js"></script>
      <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
        <meta charset="utf-8">
        <title>PointRunonLine</title>
    <!-- <link rel='stylesheet' href='css/style.css'> -->
  </head>
<body>

<script type='text/javascript'>
var svg = d3.select("body")
    .append("svg")
    .attr("width",500)
    .attr("height",500);

var path = svg.append("path")
   .attr("d","M 100 350 q 150 -300 300 0")
   .attr("fill","none")
   .attr("stroke","black")
   .attr("stroke-width",5)
   .call(transition);

var startPoint = pathStartPoint(path);

  var marker = svg.append("circle");
  marker.attr("r", 3)
    .attr("id", "marker")
    .style("fill","yellow")
    .style("opacity",0.9)
    .attr("transform", "translate(" + startPoint + ")");


  function pathStartPoint(path) {
    var d = path.attr("d"),
    dsplitted = d.split(" ");
    return dsplitted[1];
  }

  function transition(path) {
    path.transition()
        .duration(1500)
        .attrTween("stroke", tweenDash)
        .each("end", function() { d3.select(this).call(transition); }); //infinite loop
  }

  function tweenDash() {
    var l = path.node().getTotalLength();
    return function(t) {
      var marker = d3.select("#marker");
      var p = path.node().getPointAtLength(t * l);
      marker.attr("transform", "translate(" + p.x + "," + p.y + ")");
      return "black";
    }
  }
</script>


</body>
</html>
